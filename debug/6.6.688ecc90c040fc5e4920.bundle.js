(self.webpackChunkdebug=self.webpackChunkdebug||[]).push([[6],{953:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Canvas:()=>m,getValue:()=>v,listenCanvasEvent:()=>p,emitCanvasEvent:()=>h});var r=n(2),i=n(5),a=n(954),o=n(969),s=n(37);n(967);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=["#444","#3498db","#ff874d","#67a2a0"],d=null,f=null,m=(0,i.memo)((function(e){var t=e.toolbar,n=e.disabled,u=e.hideGrid,m=(0,i.useRef)(),v=c((0,i.useState)(l[0]),2),p=v[0],h=v[1],y=function(){window.localStorage.setItem("fusumaCanvasCoordinate",m.current.getSaveData())},b=function(){var e=window.localStorage.getItem("fusumaCanvasCoordinate");d!==e&&(m.current.loadSaveData(e,!0),d=e)};return(0,i.useEffect)((function(){return f=t?setInterval(y,1e3):setInterval(b,1e3),function(){f&&clearInterval(f)}}),[]),(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsxs)("div",{className:"fusuma-canvas-toolbar",children:[(0,r.jsx)(s.MdDelete,{onClick:function(){m.current.clear()},size:"32"}),(0,r.jsx)(o.FaUndo,{onClick:function(){m.current.undo()}}),(0,r.jsx)("div",{style:{background:p},onClick:function(){l=l.concat(l.splice(0,1)),h(l[0])},className:"fusuma-canvas-toolbar-color"})]}),(0,r.jsx)(a.default,{ref:m,className:"fusuma-canvas",canvasWidth:"100%",canvasHeight:"100%",loadTimeOffset:0,brushColor:p,disabled:n,hideGrid:u,lazyRadius:0,brushRadius:8})]})}));function v(){var e=window.localStorage.getItem("fusumaCanvasEvent");return JSON.parse(e||{status:"none"})}function p(e){window.addEventListener("storage",(function(t){"fusumaCanvasEvent"===t.key&&e(JSON.parse(t.newValue))}))}function h(e){window.localStorage.setItem("fusumaCanvasEvent",JSON.stringify(e))}},973:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(2),i=n(5),a=n(974),o=n.n(a),s=n(969),c=n(37),u=n(988),l=n(953),d=n(989),f=n(991),m=n(990),v=n(970);n(997);function p(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)}))}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}o().setAppElement("#root");var g=function(e){var t=e.slideUrl,n=e.slideIndex;return(0,r.jsx)("iframe",{src:"".concat(t.replace(/slide=(\d?)/,"slide=".concat(n))),width:"100%",height:"100%"})},w=null,x=null,j=null,S=[],R=0,C=null;const k=(0,i.memo)((function(e){var t=e.slides,n=e.currentIndex,a=e.terminate,p=e.onChangeSlideIndex;if(!j){var b=new URL(window.location),k=b.origin,I=b.pathname;x="".concat(k).concat(I,"?sidebar=false&isLive=false#slide="),j=new u.Controller}var T=y((0,i.useState)("prepare"),2),E=T[0],N=T[1],P=y((0,i.useState)(!1),2),A=P[0],O=P[1],M=y((0,i.useState)(!1),2),L=M[0],U=M[1],D=y((0,i.useState)(!0),2),F=D[0],q=D[1],z=y((0,i.useState)(!1),2),V=z[0],_=z[1],G=function(){try{a(),j&&(j.terminate(),j=null)}catch(e){console.error(e)}},H=function(e){if("start"===E){var n=(new Date).getTime()-R,i=S.slice(-1)[0];S.push({slideNum:e+1,time:n,timeStr:"".concat((0,m.formatTime)(n)," (+").concat((0,m.formatTime)(n-i.time),")"),event:"changed",title:"Moved to the ".concat(e+1," slide from the ").concat(e," slide."),Slide:t[e].slide,color:"#3498db",Icon:(0,r.jsx)(s.FaCaretRight,{size:"22"})})}p(e),j.changePage(e)},J=function(){0===S.length&&(R=(new Date).getTime());var e=0===S.length?0:(new Date).getTime()-R;S.push({slideNum:n+1,time:e,timeStr:(0,m.formatTime)(e),event:"started",title:"Started from the ".concat(n+1," slide."),Slide:t[n].slide,color:"#6fba1c",Icon:(0,r.jsx)(s.FaCaretDown,{})}),A&&(w.startRecording(),C=null),q(!1),N("start")},Q=function(){var e=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(new Date).getTime()-R,S.push({slideNum:n+1,time:t,timeStr:(0,m.formatTime)(t),event:"stopped",title:"Stopped at the ".concat(n+1," slide."),color:"#e9546b",Icon:(0,r.jsx)(s.FaCaretUp,{})}),!A){e.next=6;break}return e.next=5,w.stopRecording();case 5:C=e.sent;case 6:N("stop");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){w&&(w.disposeRecording(),w=null),O(!1)};return(0,i.useEffect)((function(){function e(){return(e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j){e.next=3;break}throw new Error("Not found PresenterController.");case 3:return e.next=5,j.openView();case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){document.onkeyup=null,j&&G(),W()}}),[]),(0,i.useEffect)((function(){document.onkeyup=function(e){"ArrowLeft"===e.key?H(Math.max(0,n-1)):"ArrowRight"===e.key&&H(Math.min(t.length-1,n+1))}})),(0,r.jsxs)("div",{className:"host-container",children:[(0,r.jsx)(o(),{isOpen:L,onRequestClose:function(){U(!1)},children:(0,r.jsx)(f.Timeline,{items:S,url:C})}),(0,r.jsx)("div",{className:"host-left-box",children:(0,r.jsx)("div",{className:"host-note",children:t&&(0,r.jsx)("pre",{dangerouslySetInnerHTML:{__html:t[n].fusumaProps.note}})})}),(0,r.jsxs)("div",{className:"host-right-box",children:[(0,r.jsxs)("div",{className:"host-slide-layer",children:[(0,r.jsx)("h2",{children:"Current"}),(0,r.jsx)(c.MdZoomOutMap,{size:28,onClick:function(){_(!0),(0,l.emitCanvasEvent)({status:"start"})}}),(0,r.jsx)(g,{slideUrl:x,slideIndex:n+1})]}),(0,r.jsx)(o(),{isOpen:V,onRequestClose:function(){_(!1),(0,l.emitCanvasEvent)({status:"stop"})},children:V&&(0,r.jsxs)("div",{className:"host-slide-canvas",children:[(0,r.jsx)(l.Canvas,{toolbar:!0,hideGrid:!0}),(0,r.jsx)(g,{slideUrl:x,slideIndex:n+1})]})}),(0,r.jsxs)("div",{className:"host-slide-layer",children:[(0,r.jsx)("h2",{children:"Next"}),(0,r.jsx)(g,{slideUrl:x,slideIndex:n+2})]})]}),(0,r.jsxs)("div",{className:"host-bottom-box",children:[(0,r.jsx)(s.FaTimes,{onClick:G,className:"terminate-button"}),(0,r.jsxs)("div",{className:"host-bottom-box-info",children:[(0,r.jsx)(d.Timer,{start:J,stop:Q,reset:function(){C=null,S=[],R=0,N("prepare"),q(!0)},disabledStart:"stop"===E&&A&&!J.isEmptyRecordedTimeline,disabledStop:"stop"===E&&A&&!J.isEmptyRecordedTimeline,disabledReset:"start"===E&&A}),(0,r.jsxs)("span",{className:"current-slide-num",children:["".concat(n+1).padStart(2,"0")," / ","".concat(t.length).padStart(2,"0")]}),(0,r.jsx)(s.FaHistory,{onClick:function(){U(!0)},size:18,className:"start"===E&&A||F?"disabled":void 0}),A?(0,r.jsx)(s.FaMicrophoneAlt,{onClick:W,className:"start"!==E&&F?void 0:"disabled",size:20,color:"#6fba1c"}):(0,r.jsx)(s.FaMicrophoneAltSlash,{onClick:function(){if(!w)try{(w=new v.WebRTC).setupRecording(),O(!0)}catch(e){alert(e)}},className:"start"!==E&&F?void 0:"disabled",size:20})]})]})]})}))},991:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Timeline:()=>s});var r=n(2),i=n(5),a=n(992);function o(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var s=function(e){var t=e.items,n=e.url,s=(0,i.useRef)();return(0,i.useEffect)((function(){if(s.current){var e=s.current,n=function(){var t,n=(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.addEventListener("loadedmetadata",(function(){e.duration===1/0&&(e.currentTime=Number.MAX_SAFE_INTEGER,e.addEventListener("timeupdate",(function n(){e.currentTime=0,e.removeEventListener("timeupdate",n),t()})))}))})));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}(),r=document.querySelectorAll(".ReactModalPortal section > div");n();var i=!1;e.addEventListener("playing",(function(){i||(e.currentTime=0,i=!0)})),e.addEventListener("timeupdate",(function(){var n=function(e){for(var n=0,r=0;r<t.length;r++)if(e<=t[r].time){n=r;break}return n}(1e3*e.currentTime);r[n].scrollIntoView()}))}}),[]),(0,r.jsxs)("div",{className:"host-timeline-container",children:[n&&(0,r.jsx)("div",{className:"host-timeline-audio",children:(0,r.jsx)("audio",{src:n,controls:!0,ref:s})}),(0,r.jsx)("div",{className:"host-timeline-body",children:(0,r.jsx)(a.Timeline,{children:t.map((function(e,t){var n=e.title,i=e.time,o=e.timeStr,s=e.Slide,c=e.color,u=e.Icon;return(0,r.jsx)(a.TimelineEvent,{title:n,createdAt:o,iconColor:c,icon:u,children:s&&(0,r.jsx)(s,{})},i)}))})})]})}},989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Timer:()=>d});var r=n(2),i=n(5),a=n(969),o=n(990);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=0,l=null,d=(0,i.memo)((function(e){var t=e.start,n=e.stop,c=e.reset,d=e.disabledStart,f=e.disabledStop,m=e.disabledReset,v=s((0,i.useState)(!0),2),p=v[0],h=v[1],y=s((0,i.useState)("00:00:00"),2),b=y[0],g=y[1];return(0,i.useEffect)((function(){return function(){l&&clearInterval(l)}}),[]),(0,r.jsxs)("div",{className:"host-timer",children:[(0,r.jsx)(a.FaRegHourglass,{onClick:function(){l&&n(),u=0,g("00:00:00"),c()},className:m?"disabled":void 0}),p?(0,r.jsx)(a.FaPlay,{onClick:function(){l=setInterval((function(){return u+=1e3,void g((0,o.formatTime)(u))}),1e3),h(!1),t()},className:d?"disabled":void 0}):(0,r.jsx)(a.FaStop,{onClick:function(){clearInterval(l),h(!0),l=null,n()},className:f?"disabled":void 0}),(0,r.jsx)("span",{children:b})]})}))},988:(e,t,n)=>{"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,{Controller:()=>a});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.receiverQuery="?presenter=view",this.apiType="function"==typeof window.PresentationRequest?"presentation":"localStorage",this.windowId=null}var t,n,a,o,s;return t=e,(n=[{key:"openView",value:function(){var e=this;return new Promise((function(t,n){"presentation"===e.apiType?(e.presentationRequest=new PresentationRequest([e.receiverQuery]),navigator.presentation.defaultRequest=e.presentationRequest,e.presentationRequest.addEventListener("connectionavailable",(function(n){e.presentationConnection=n.connection,t(n.connection.id)})),e.presentationRequest.start().catch((function(e){return n(e)}))):(e.windowId=window.open(e.receiverQuery,"_blank","width=800,height=600"),t())}))}},{key:"changePage",value:function(e){var t=JSON.stringify({date:Date.now(),page:e});"presentation"===this.apiType&&this.presentationConnection&&this.presentationConnection.send(t),"localStorage"===this.apiType&&window.localStorage.setItem("page",t)}},{key:"reconnect",value:(o=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("presentation"!==this.apiType){e.next=2;break}return e.abrupt("return",this.presentationRequest.reconnect(t));case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,i){var a=o.apply(e,t);function s(e){r(a,n,i,s,c,"next",e)}function c(e){r(a,n,i,s,c,"throw",e)}s(void 0)}))},function(e){return s.apply(this,arguments)})},{key:"terminate",value:function(){"presentation"===this.apiType&&this.presentationConnection?(this.presentationConnection.terminate(),this.presentationConnection.close(),this.presentationConnection=null):this.windowId&&(this.windowId.close(),this.windowId=null)}}])&&i(t.prototype,n),a&&i(t,a),e}()},990:(e,t,n)=>{"use strict";function r(e){parseInt(e%1e3/100);var t=Math.floor(e/1e3%60).toString().padStart(2,"0"),n=Math.floor(e/6e4%60).toString().padStart(2,"0"),r=Math.floor(e/36e5%24).toString().padStart(2,"0");return"".concat(r,":").concat(n,":").concat(t)}n.r(t),n.d(t,{formatTime:()=>r})},970:(e,t,n)=>{"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{WebRTC:()=>o});var o=function(){function e(){var t=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"setupRecording",(function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(t.handlerRecording)})),a(this,"handlerRecording",(function(e){var n=[];t.stream=e,t.mediaRecorder=new MediaRecorder(e,{}),t.mediaRecorder.addEventListener("dataavailable",(function(e){e.data.size>0&&n.push(e.data)})),t.mediaRecorder.addEventListener("stop",(function(){t.finishedProcess=!0,t.url=URL.createObjectURL(new Blob(n,{type:"audio/webm"}))}))})),a(this,"startRecording",(function(){t.mediaRecorder.start(),t.finishedProcess=!1,t.url=null})),a(this,"stopRecording",(function(){return new Promise((function(e){t.mediaRecorder.stop();var n=setInterval((function(){t.finishedProcess&&(clearInterval(n),e(t.url))}),100)}))})),a(this,"disposeRecording",(function(){t.mediaRecorder.stream.getTracks().forEach((function(e){return e.stop()})),t.finishedProcess=!1,t.url=null})),!navigator.mediaDevices.getUserMedia)throw new Error("Not supported");this.url=null,this.finishedProcess=!1}var t,n,o,s,c;return t=e,(n=[{key:"startCapturing",value:(s=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})),c=function(){var e=this,t=arguments;return new Promise((function(n,i){var a=s.apply(e,t);function o(e){r(a,n,i,o,c,"next",e)}function c(e){r(a,n,i,o,c,"throw",e)}o(void 0)}))},function(e){return c.apply(this,arguments)})},{key:"stopCapturing",value:function(e){e.srcObject.getTracks().forEach((function(e){return e.stop()})),e.srcObject=null}}])&&i(t.prototype,n),o&&i(t,o),e}()},968:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(28),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const a=i},998:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(28),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const a=i},967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(26),i=n.n(r),a=n(968),o={insert:"head",singleton:!1};i()(a.default,o);const s=a.default.locals||{}},997:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(26),i=n.n(r),a=n(998),o={insert:"head",singleton:!1};i()(a.default,o);const s=a.default.locals||{}}}]);